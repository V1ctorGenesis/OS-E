<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Editar Solicita√ß√£o #{{ solicitacao['id'] }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header>
    <h1>‚úèÔ∏è Editar Solicita√ß√£o #{{ solicitacao['id'] }}</h1>
    <p>Atualize as informa√ß√µes da solicita√ß√£o</p>
    <a href="{{ url_for('dashboard') }}" class="btn-dashboard">üìä Dashboard</a>
    <a href="{{ url_for('logout') }}" class="btn-logout">üö™ Sair</a>
  </header>

  <main>
    <section class="formulario-secao">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="mensagens">
            {% for category, message in messages %}
              <div class="alert alert-{{ category }}">
                {{ message }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <a href="{{ url_for('listar') }}" class="btn-voltar">‚Üê Voltar √† Lista</a>

      <form method="POST">
        <fieldset>
          <legend>Informa√ß√µes do Cliente</legend>
          
          <label for="cliente">Cliente *</label>
          <input type="text" id="cliente" name="cliente" value="{{ solicitacao['cliente'] }}" required>
          
          <label for="contato">Contato</label>
          <input type="text" id="contato" name="contato" value="{{ solicitacao['contato'] or '' }}">
          
          <label for="setor">Setor</label>
          <input type="text" id="setor" name="setor" value="{{ solicitacao['setor'] or '' }}">
        </fieldset>

        <fieldset>
          <legend>Detalhes da Manuten√ß√£o</legend>
          
          <label for="equipamento">Equipamento *</label>
          <input type="text" id="equipamento" name="equipamento" value="{{ solicitacao['equipamento'] }}" required>
          
          <label for="tipo">Tipo de Manuten√ß√£o *</label>
          <select id="tipo" name="tipo" required>
            <option value="Instala√ß√£o" {% if solicitacao['tipo'] == 'Instala√ß√£o' or solicitacao['tipo'] == 'instalacao' %}selected{% endif %}>Instala√ß√£o</option>
            <option value="Preventiva" {% if solicitacao['tipo'] == 'Preventiva' or solicitacao['tipo'] == 'preventiva' %}selected{% endif %}>Preventiva</option>
            <option value="Corretiva" {% if solicitacao['tipo'] == 'Corretiva' or solicitacao['tipo'] == 'corretiva' %}selected{% endif %}>Corretiva</option>
            <option value="Montagem" {% if solicitacao['tipo'] == 'Montagem' or solicitacao['tipo'] == 'montagem' %}selected{% endif %}>Montagem</option>
          </select>
          
          <label for="descricao">Descri√ß√£o do Problema *</label>
          <textarea id="descricao" name="descricao" rows="4" required>{{ solicitacao['descricao'] }}</textarea>
          
          <label for="prioridade">Prioridade</label>
          <select id="prioridade" name="prioridade">
            <option value="">-- Selecione --</option>
            <option value="urgente" {% if solicitacao['prioridade'] == 'urgente' %}selected{% endif %}>Urgente</option>
            <option value="alta" {% if solicitacao['prioridade'] == 'alta' %}selected{% endif %}>Alta</option>
            <option value="media" {% if solicitacao['prioridade'] == 'media' %}selected{% endif %}>M√©dia</option>
            <option value="baixa" {% if solicitacao['prioridade'] == 'baixa' %}selected{% endif %}>Baixa</option>
          </select>
        </fieldset>

        <fieldset>
          <legend>Respons√°vel</legend>
          
          <label for="tecnico">T√©cnico</label>
          <input type="text" id="tecnico" name="tecnico" value="{{ solicitacao['tecnico'] or '' }}">
          
          <label for="data">Data da Solicita√ß√£o</label>
          <input type="date" id="data" name="data" value="{{ solicitacao['data_solicitacao'] or '' }}">
        </fieldset>

        <fieldset>
          <legend>Pe√ßas e Material</legend>
          
          <label for="pecas">Pe√ßas Necess√°rias</label>
          <textarea id="pecas" name="pecas" rows="3">{{ solicitacao['pecas'] or '' }}</textarea>
        </fieldset>

        <div class="botoes">
          <button type="submit">üíæ Salvar Altera√ß√µes</button>
        </div>
      </form>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 - Sistema de Manuten√ß√£o</p>
  </footer>
</body>
</html>
